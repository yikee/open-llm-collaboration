<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Open LLM Collaboration</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f9fafb;
            color: #111827;
            line-height: 1.6;
        }
        
        .min-h-screen {
            min-height: 100vh;
        }
        
        .bg-gray-50 {
            background-color: #f9fafb;
        }
        
        .text-gray-900 {
            color: #111827;
        }
        
        .text-gray-600 {
            color: #4b5563;
        }
        
        .text-gray-700 {
            color: #374151;
        }
        
        .text-gray-800 {
            color: #1f2937;
        }
        
        .text-blue-700 {
            color: #1d4ed8;
        }
        
        .text-red-800 {
            color: #991b1b;
        }
        
        .text-green-700 {
            color: #15803d;
        }
        
        .text-amber-700 {
            color: #a16207;
        }
        
        .bg-white {
            background-color: #ffffff;
        }
        
        .bg-gray-100 {
            background-color: #f3f4f6;
        }
        
        .bg-red-50 {
            background-color: #fef2f2;
        }
        
        .bg-purple-900 {
            background-color: #581c87;
        }
        
        .bg-gray-900 {
            background-color: #111827;
        }
        
        .border {
            border: 1px solid #e5e7eb;
        }
        
        .border-b {
            border-bottom: 1px solid #e5e7eb;
        }
        
        .border-t {
            border-top: 1px solid #e5e7eb;
        }
        
        .border-gray-200 {
            border-color: #e5e7eb;
        }
        
        .border-red-200 {
            border-color: #fecaca;
        }
        
        .rounded {
            border-radius: 0.375rem;
        }
        
        .rounded-xl {
            border-radius: 0.75rem;
        }
        
        .shadow-sm {
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
        
        .max-w-4xl {
            max-width: 56rem;
        }
        
        .mx-auto {
            margin-left: auto;
            margin-right: auto;
        }
        
        .px-4 {
            padding-left: 1rem;
            padding-right: 1rem;
        }
        
        .py-5 {
            padding-top: 1.25rem;
            padding-bottom: 1.25rem;
        }
        
        .py-6 {
            padding-top: 1.5rem;
            padding-bottom: 1.5rem;
        }
        
        .py-4 {
            padding-top: 1rem;
            padding-bottom: 1rem;
        }
        
        .py-1 {
            padding-top: 0.25rem;
            padding-bottom: 0.25rem;
        }
        
        .px-2 {
            padding-left: 0.5rem;
            padding-right: 0.5rem;
        }
        
        .px-3 {
            padding-left: 0.75rem;
            padding-right: 0.75rem;
        }
        
        .p-2 {
            padding: 0.5rem;
        }
        
        .p-3 {
            padding: 0.75rem;
        }
        
        .p-4 {
            padding: 1rem;
        }
        
        .mb-6 {
            margin-bottom: 1.5rem;
        }
        
        .mb-4 {
            margin-bottom: 1rem;
        }
        
        .mb-2 {
            margin-bottom: 0.5rem;
        }
        
        .mb-10 {
            margin-bottom: 2.5rem;
        }
        
        .mt-2 {
            margin-top: 0.5rem;
        }
        
        .mt-3 {
            margin-top: 0.75rem;
        }
        
        .gap-2 {
            gap: 0.5rem;
        }
        
        .gap-3 {
            gap: 0.75rem;
        }
        
        .h-9 {
            height: 2.25rem;
        }
        
        .w-9 {
            width: 2.25rem;
        }
        
        .h-4 {
            height: 1rem;
        }
        
        .w-4 {
            width: 1rem;
        }
        
        .min-h-5rem {
            min-height: 5rem;
        }
        
        .min-h-4rem {
            min-height: 4rem;
        }
        
        .text-lg {
            font-size: 1.125rem;
            line-height: 1.75rem;
        }
        
        .text-sm {
            font-size: 0.875rem;
            line-height: 1.25rem;
        }
        
        .text-xs {
            font-size: 0.75rem;
            line-height: 1rem;
        }
        
        .text-base {
            font-size: 1rem;
            line-height: 1.5rem;
        }
        
        .text-lg-textarea {
            font-size: 1rem;
            line-height: 1.5rem;
        }
        
        .font-semibold {
            font-weight: 600;
        }
        
        .font-medium {
            font-weight: 500;
        }
        
        .font-bold {
            font-weight: 700;
        }
        
        .leading-relaxed {
            line-height: 1.625;
        }
        
        .flex {
            display: flex;
        }
        
        .flex-col {
            flex-direction: column;
        }
        
        .items-center {
            align-items: center;
        }
        
        .items-start {
            align-items: flex-start;
        }
        
        .justify-between {
            justify-content: space-between;
        }
        
        .justify-end {
            justify-content: flex-end;
        }
        
        .flex-1 {
            flex: 1 1 0%;
        }
        
        .grid {
            display: grid;
        }
        
        .place-items-center {
            place-items: center;
        }
        
        .space-y-3 > * + * {
            margin-top: 0.75rem;
        }
        
        .list-disc {
            list-style-type: disc;
        }
        
        .list-inside {
            list-style-position: inside;
        }
        
        .pl-5 {
            padding-left: 1.25rem;
        }
        
        .underline {
            text-decoration: underline;
        }
        
        .hover\:bg-gray-50:hover {
            background-color: #f9fafb;
        }
        
        .hover\:bg-black:hover {
            background-color: #000000;
        }
        
        .hover\:bg-gray-50:hover {
            background-color: #f9fafb;
        }
        
        .disabled\:opacity-50:disabled {
            opacity: 0.5;
        }
        
        .opacity-50 {
            opacity: 0.5;
        }
        
        .text-white {
            color: #ffffff;
        }
        
        .text-gray-500 {
            color: #6b7280;
        }
        
        .w-full {
            width: 100%;
        }
        
        .inline-flex {
            display: inline-flex;
        }
        
        button {
            cursor: pointer;
            border: none;
            outline: none;
        }
        
        button:disabled {
            cursor: not-allowed;
        }
        
        input[type="radio"], input[type="checkbox"] {
            cursor: pointer;
        }
        
        textarea {
            resize: vertical;
            font-family: inherit;
        }
        
        a {
            color: inherit;
            text-decoration: none;
        }
        
        a:hover {
            text-decoration: underline;
        }
        
        @media (min-width: 640px) {
            .sm\:flex-row {
                flex-direction: row;
            }
            .sm\:w-32 {
                width: 8rem;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <!-- React and Babel for JSX support -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel" data-presets="typescript,react">
        // ---- Collector config + helper (PUT THIS NEAR THE TOP, OUTSIDE THE COMPONENT)
        const COLLECT_URL = "https://script.google.com/macros/s/AKfycbxGtX2N3-6PhpWg9V9ITQrgwQdXAS7ZnlXUfTzHFSfMCVnLuy8b_uepwcvLl2Cpo_yZ9w/exec"; // your Apps Script URL
        const SHARED_SECRET = "fw84"; // optional; must match the script if you set one

        async function submitToSheet(payload) {
            // "text/plain" keeps it a simple request (no CORS preflight)
            const res = await fetch(COLLECT_URL, {
                method: "POST",
                headers: { "Content-Type": "text/plain;charset=utf-8" },
                body: JSON.stringify({ ...payload, key: SHARED_SECRET }),
            });
            const data = await res.json().catch(() => ({}));
            if (!res.ok || data.ok !== true) throw new Error("Submit failed");
        }

        // Download JSON function
        function downloadJSON(payload) {
            const blob = new Blob([JSON.stringify(payload, null, 2)], { type: "application/json" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "claim-annotations.json";
            a.click();
            URL.revokeObjectURL(url);
        }

        // Form data structure
        const FORM_DATA = {
            modelName: "",
            baseModel: "",
            description: "",
            paperTitle: ""
        };

        // Download JSON function for form data
        function downloadFormJSON(payload) {
            const blob = new Blob([JSON.stringify(payload, null, 2)], { type: "application/json" });
            const url = URL.createObjectURL(blob);
            const a = document.createElement("a");
            a.href = url;
            a.download = "model-submission.json";
            a.click();
            URL.revokeObjectURL(url);
        }

        // ModelSubmissionApp React component
        function ModelSubmissionApp() {
            const [formData, setFormData] = React.useState(FORM_DATA);
            const [consent, setConsent] = React.useState(false);
            const [saving, setSaving] = React.useState("idle");

            const handleInputChange = (field, value) => {
                setFormData(prev => ({ ...prev, [field]: value }));
            };

            const handleSubmit = async (e) => {
                e.preventDefault();
                if (!consent) return;

                const payload = {
                    ...formData,
                    consent,
                    timestamp: new Date().toISOString(),
                };

                setSaving("saving");
                try {
                    await submitToSheet(payload);
                    setSaving("ok");
                } catch (err) {
                    setSaving("err");
                    downloadFormJSON(payload);
                }
            };

            return (
                <div className="min-h-screen bg-gray-50 text-gray-900">
                    <header className="border-b bg-white">
                        <div className="max-w-4xl mx-auto px-4 py-5 flex items-center gap-3">
                            <div className="h-9 w-9 rounded bg-purple-900 text-white grid place-items-center font-bold">UW</div>
                            <div>
                                <h1 className="text-lg font-semibold">Open LLM Collaboration</h1>
                                <p className="text-sm text-gray-600">Model Submission Form</p>
                            </div>
                        </div>
                    </header>
                    
                    <main className="max-w-4xl mx-auto px-4 py-6">
                        {/* Overview Section */}
                        <section className="mb-6">
                            <h2 className="text-lg font-semibold text-gray-900 mb-2">Overview</h2>
                            <div className="bg-white border border-gray-200 rounded-xl p-4 shadow-sm">
                                <p className="text-base leading-relaxed mb-2">Have you released/open-sourced any (language) model checkpoints to huggingface from your research in the past year? We are doing a study on how diverse models trained in LLM research could complement each other. If your model: 1) is a &lt;10b language model, 2) has basic instruction following, 3) is specialized/fine-tuned/RLed/adapted from one of the major open industry models (llama, gemma, qwen, olmo, etc.), we would love to know more about it! If used in the project, we will cite and credit your contribution :)</p>
                            </div>
                        </section>
                        
                        {/* Form Section */}
                        <section className="mb-6">
                            <h2 className="text-lg font-semibold text-gray-900 mb-2">Form</h2>
                            <div className="bg-white border border-gray-200 rounded-xl p-4 shadow-sm">
                                <form onSubmit={handleSubmit} className="space-y-4">
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            Model name (the identifier on huggingface such as Qwen/Qwen3-8B)
                                        </label>
                                        <input
                                            type="text"
                                            className="w-full rounded border border-gray-300 px-3 py-2 text-base"
                                            placeholder="e.g., Qwen/Qwen3-8B"
                                            value={formData.modelName}
                                            onChange={(e) => handleInputChange('modelName', e.target.value)}
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            Base model (the identifier on huggingface such as Qwen/Qwen3-8B)
                                        </label>
                                        <input
                                            type="text"
                                            className="w-full rounded border border-gray-300 px-3 py-2 text-base"
                                            placeholder="e.g., Qwen/Qwen3-8B"
                                            value={formData.baseModel}
                                            onChange={(e) => handleInputChange('baseModel', e.target.value)}
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            Description (1-2 sentence(s) about what the model is trained on/for)
                                        </label>
                                        <textarea
                                            className="w-full rounded border border-gray-300 px-3 py-2 text-base min-h-4rem"
                                            placeholder="Describe what your model is trained on or specialized for..."
                                            value={formData.description}
                                            onChange={(e) => handleInputChange('description', e.target.value)}
                                        />
                                    </div>
                                    
                                    <div>
                                        <label className="block text-sm font-medium text-gray-700 mb-2">
                                            Title of the associated paper (that we will cite if employed)
                                        </label>
                                        <input
                                            type="text"
                                            className="w-full rounded border border-gray-300 px-3 py-2 text-base"
                                            placeholder="Paper title"
                                            value={formData.paperTitle}
                                            onChange={(e) => handleInputChange('paperTitle', e.target.value)}
                                        />
                                    </div>
                                </form>
                            </div>
                        </section>
                        
                        
                        {/* Consent & Submit Section */}
                        <section className="mb-10">
                            <h2 className="text-lg font-semibold text-gray-900 mb-2">Consent & Submit</h2>
                            <div className="bg-white border border-gray-200 rounded-xl p-4 shadow-sm">
                                <div className="space-y-3">
                                    <div className="flex items-start gap-3">
                                        <input 
                                            type="checkbox" 
                                            className="mt-1 h-4 w-4" 
                                            checked={consent}
                                            onChange={(e) => setConsent(e.target.checked)}
                                        />
                                        <label className="text-base">I understand my model information will be used for research purposes and I will not submit any sensitive or confidential information. I will be acknowledged for my contributions.</label>
                                    </div>
                                    <div className="flex gap-3 items-center">
                                        <button 
                                            type="submit" 
                                            className="px-4 py-2 rounded bg-gray-900 text-white hover:bg-black disabled:opacity-50 text-base"
                                            disabled={saving === "saving"}
                                            onClick={handleSubmit}
                                        >
                                            {saving === "saving" ? "Submitting..." : "Submit"}
                                        </button>
                                        {saving === "ok" && <span className="text-sm text-green-700">Saved ✓</span>}
                                        {saving === "err" && <span className="text-sm text-amber-700">Couldn't reach server; downloaded a backup JSON.</span>}
                                    </div>
                                </div>
                            </div>
                        </section>
                    </main>
                    
                    <footer className="border-t bg-white">
                        <div className="max-w-4xl mx-auto px-4 py-4 text-xs text-gray-600">© UW — Open LLM Collaboration Study.</div>
                    </footer>
                </div>
            );
        }

        // Mount the ModelSubmissionApp directly
        const root = ReactDOM.createRoot(document.getElementById("root"));
        root.render(<ModelSubmissionApp />);
    </script>

</body>
</html>
